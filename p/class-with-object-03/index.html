<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="从初始化列表到静态成员：更深入的类机制">
<title>【C&#43;&#43;初阶】04类和对象（下）</title>

<link rel='canonical' href='https://Amarantos-Arrebol.github.io/p/class-with-object-03/'>

<link rel="stylesheet" href="/scss/style.min.56dee55d52da9700151ae7b7681e72fc3b45c8f61a70cebc3e499f821d178133.css"><meta property='og:title' content="【C++初阶】04类和对象（下）">
<meta property='og:description' content="从初始化列表到静态成员：更深入的类机制">
<meta property='og:url' content='https://Amarantos-Arrebol.github.io/p/class-with-object-03/'>
<meta property='og:site_name' content='PursUnre的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='C&#43;&#43;初阶' /><meta property='article:tag' content='面向对象' /><meta property='article:tag' content='运算符重载' /><meta property='article:tag' content='const成员' /><meta property='article:published_time' content='2025-11-02T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-11-02T00:00:00&#43;00:00'/><meta property='og:image' content='https://Amarantos-Arrebol.github.io/p/class-with-object-03/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF.png' />
<meta name="twitter:title" content="【C++初阶】04类和对象（下）">
<meta name="twitter:description" content="从初始化列表到静态成员：更深入的类机制"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://Amarantos-Arrebol.github.io/p/class-with-object-03/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF.png' /><link rel="stylesheet" href="/css/custom.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>


<script>
$(document).ready(function() {
    
    $.getScript("https://cdn.jsdelivr.net/gh/huangwb8/bloghelper@latest/mouse/halo-dream/fairyDustCursor.min.js");
});
</script>


<style type="text/css">
.main-content img, body {
    cursor: url(https://cdn.jsdelivr.net/gh/huangwb8/bloghelper@latest/mouse/halo-dream/cursor/breeze/Arrow.cur), auto;
}

.actions > div,
.expand-done,
.main-content figure > figcaption div,
.navbar-above .navbar-nav .item,
.navbar-searchicon,
.navbar-slideicon,
.photos .picture-details,
.widget .ad-tag .click-close,
a,
button {
    cursor: url(https://cdn.jsdelivr.net/gh/huangwb8/bloghelper@latest/mouse/halo-dream/cursor/breeze/Hand.cur), auto;
}

blockquote,
code,
h1, h2, h3, h4, h5, h6,
hr,
input[type=text],
li,
p,
td,
textarea,
th {
    cursor: url(https://cdn.jsdelivr.net/gh/huangwb8/bloghelper@latest/mouse/halo-dream/cursor/breeze/IBeam.cur), auto;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    const articleContent = document.querySelector('.article-content');
    if (!articleContent) return;
    
    
    function processTextNode(node) {
        if (node.nodeType === Node.TEXT_NODE) {
            const text = node.textContent;
            
            const regex = /==([^=\n`]+?)==/g;
            
            if (regex.test(text)) {
                const parent = node.parentNode;
                
                if (parent && !['CODE', 'PRE', 'KBD', 'SAMP'].includes(parent.tagName)) {
                    const fragment = document.createDocumentFragment();
                    let lastIndex = 0;
                    
                    text.replace(/==([^=\n`]+?)==/g, function(match, content, offset) {
                        
                        if (offset > lastIndex) {
                            fragment.appendChild(document.createTextNode(text.slice(lastIndex, offset)));
                        }
                        
                        
                        const mark = document.createElement('mark');
                        mark.textContent = content;
                        fragment.appendChild(mark);
                        
                        lastIndex = offset + match.length;
                        return match;
                    });
                    
                    
                    if (lastIndex < text.length) {
                        fragment.appendChild(document.createTextNode(text.slice(lastIndex)));
                    }
                    
                    parent.replaceChild(fragment, node);
                }
            }
        } else if (node.nodeType === Node.ELEMENT_NODE && 
                   !['CODE', 'PRE', 'SCRIPT', 'STYLE', 'KBD', 'SAMP'].includes(node.tagName)) {
            
            Array.from(node.childNodes).forEach(processTextNode);
        }
    }
    
    processTextNode(articleContent);
});
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside
  class="sidebar left-sidebar sticky "
>
  <button
    class="hamburger hamburger--spin"
    type="button"
    id="toggle-menu"
    aria-label="切换菜单"
  >
    <span class="hamburger-box">
      <span class="hamburger-inner"></span>
    </span>
  </button>

  <header>
     
    <figure class="site-avatar">
      <a href="/">
           
        <img
          src="/img/avatar_hu_c3bef4dff24cf0d9.png"
          width="300"
          height="300"
          class="site-logo"
          loading="lazy"
          alt="Avatar"
        />
         
      </a>
      
      <span class="emoji">🌿</span>
      
    </figure>
     

    <div class="site-meta">
      <h1 class="site-name">
        <a href="/">PursUnre的博客</a>
      </h1>
      <h2 class="site-description">欢迎来到我的网站，此博客由【Hugo&#43;Stack】来进行搭建，主要分享个人学习笔记</h2>
    </div>
  </header><ol class="menu-social">
    
    <li>
      <a
        href="https://blog.csdn.net/green_tangerine?spm=1000.2115.3001.5343"
        target="_blank"
        
        title="CSDN"
        
        rel="me"
      >
          <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1762020245107" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4643" width="32" height="32" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M568.917333 626.005333l16.213334 2.474667c5.674667-0.64 10.965333-1.109333 15.914666-1.578667 9.941333-0.938667 18.688-1.792 27.221334-3.498666 38.4-7.68 67.968-27.434667 83.2-64.768 10.325333-25.002667 11.690667-51.242667 8.533333-77.653334-4.864-41.088-23.68-72.96-64.085333-88.106666-39.125333-14.634667-78.336-9.301333-117.077334 2.56-6.186667 1.92-9.685333 6.954667-10.24 13.653333-1.152 13.141333-2.304 26.24-3.541333 39.338667-4.821333 51.328-9.557333 102.656-14.208 153.984-0.896 9.642667 2.304 14.506667 12.202667 16.213333 15.744 2.816 31.445333 5.205333 45.866666 7.381333z m21.589334-33.450666c-2.602667 0.170667-5.12 0.341333-7.381334 0.554666l-10.624-0.725333a2204.416 2204.416 0 0 0-15.36-0.981333c-5.76-0.256-8.149333-2.816-7.509333-8.96 1.536-15.36 2.901333-30.634667 4.266667-45.994667l2.048-22.912 2.858666-30.848 4.693334-51.114667v-0.170666c0.426667-4.565333 0.768-8.533333 6.4-9.770667 20.053333-4.352 40.234667-6.698667 60.458666-1.962667 28.032 6.570667 43.093333 25.813333 49.194667 52.906667 5.546667 24.618667 5.205333 49.152-4.565333 72.746667-11.776 28.416-36.096 40.021333-64.426667 45.141333-6.826667 1.28-13.781333 1.706667-20.053333 2.133333zM308.437333 606.208c23.765333 16.341333 50.986667 20.778667 79.189334 20.992 17.152 0.170667 34.005333-1.706667 49.92-8.448 25.216-10.666667 38.101333-30.421333 41.429333-56.917333 3.328-26.496-6.144-47.744-29.098667-61.568a242.346667 242.346667 0 0 0-38.4-18.218667c-8.405333-3.242667-16.981333-5.930667-25.514666-8.618667a367.957333 367.957333 0 0 1-29.781334-10.325333c-17.28-7.253333-18.517333-19.498667-5.034666-32.725333 17.237333-16.896 49.621333-18.176 69.888-2.133334 5.845333 4.608 10.837333 10.368 15.744 16.085334l1.365333 1.578666c6.144 7.125333 12.757333 8.021333 19.925333 1.962667 11.776-9.813333 11.690667-25.6-0.426666-36.693333-22.570667-20.650667-49.408-29.696-79.573334-26.197334-27.904 3.242667-51.626667 15.189333-66.986666 39.936-13.994667 22.613333-9.088 48.554667 13.397333 62.634667 10.24 6.442667 21.973333 10.666667 33.536 14.933333 2.133333 0.725333 4.181333 1.493333 6.229333 2.261334 8.234667 3.029333 16.512 5.802667 24.874667 8.533333 10.368 3.413333 20.736 6.869333 30.890667 10.837333 12.458667 4.906667 19.498667 14.677333 19.029333 28.885334-0.597333 16.512-7.637333 28.586667-23.808 33.792-27.946667 9.130667-83.2 6.4-102.058667-30.421334-3.84-7.296-10.368-8.021333-17.792-3.925333-13.44 7.466667-17.28 23.04-7.466666 34.986667 5.930667 7.168 12.8 13.482667 20.48 18.773333zM805.674667 410.538667c3.882667-1.962667 7.850667-4.181333 11.861333-6.485334 9.130667-5.12 18.730667-10.581333 29.013333-13.653333 30.592-9.130667 61.269333-7.509333 88.490667 11.136 21.162667 14.506667 30.293333 36.096 28.458667 61.354667-2.346667 32.085333-5.205333 64.170667-8.021334 96.256-1.408 15.786667-2.816 31.530667-4.138666 47.274666-1.408 16.725333-18.56 26.453333-33.066667 18.090667-2.688-1.536-4.778667-6.826667-4.565333-10.24 1.365333-21.12 3.157333-42.197333 4.992-63.232l0.768-9.002667 2.261333-25.216c1.749333-19.2 3.498667-38.4 4.693333-57.6 0.896-13.141333-4.693333-23.893333-16.298666-31.232-30.848-19.498667-71.68-9.728-94.208 22.485334-15.616 22.442667-21.205333 47.616-23.04 74.410666-1.365333 20.352-3.328 40.661333-5.333334 60.928l-2.944 30.890667c-0.512 5.973333-3.669333 9.002667-9.386666 9.386667a89.386667 89.386667 0 0 1-12.373334 0c-10.496-0.810667-14.890667-6.656-13.994666-17.066667 2.304-26.197333 4.48-52.48 6.656-78.677333l2.773333-32.853334 2.005333-24.234666c1.493333-18.474667 2.986667-36.906667 4.693334-55.338667 1.365333-15.018667 19.328-25.856 32.64-19.072 2.986667 1.536 4.778667 5.248 6.314666 8.362667 0.597333 1.28 1.152 2.432 1.749334 3.328zM95.445333 603.008c22.698667 18.346667 49.493333 23.893333 77.952 24.064 27.946667-0.128 54.570667-5.12 78.549334-20.650667a22.357333 22.357333 0 0 0 10.965333-23.893333 22.186667 22.186667 0 0 0-13.184-17.706667c-6.698667-2.901333-11.434667 1.194667-16.341333 5.546667l-0.298667 0.213333a72.149333 72.149333 0 0 1-17.706667 11.776c-22.613333 10.112-46.336 11.008-70.186666 5.504-23.466667-5.461333-38.954667-20.138667-44.032-43.904-7.893333-36.949333-0.981333-71.253333 23.168-100.565333 17.834667-21.76 41.813333-31.018667 69.205333-21.76 9.173333 3.072 17.322667 9.386667 25.344 15.616 2.261333 1.749333 4.522667 3.498667 6.741333 5.12 7.210667 5.376 13.525333 5.546667 19.2-1.450667a23.338667 23.338667 0 0 0-1.962666-32.682666 87.381333 87.381333 0 0 0-58.410667-23.552c-48.128-1.194667-82.901333 21.888-106.24 62.677333-16.341333 28.458667-21.376 59.477333-16.938667 92.032 3.456 25.472 13.909333 47.232 34.133334 63.573333z" fill="#707070" p-id="4644"></path></svg> 
      </a>
    </li>
    
    <li>
      <a
        href="https://gitee.com/green-citrus"
        target="_blank"
        
        title="Gitee"
        
        rel="me"
      >
          <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1762076613092" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2602" width="32" height="32" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M690.194 479.706H496.998v0.004c-9.275 0-16.798 7.518-16.8 16.795l-0.016 42h-0.004c-0.002 9.277 7.518 16.799 16.796 16.803h0.004l117.618-0.004c9.277 0 16.8 7.522 16.8 16.8v8.4c0 27.832-22.564 50.398-50.399 50.398h-159.61c-9.277 0-16.797-7.522-16.797-16.8l-0.004-159.597h-0.002c0-27.834 22.562-50.398 50.397-50.4h0.002l235.164 0.002v-0.011c9.275 0 16.794-7.516 16.8-16.789l0.037-41.999h0.011c0.006-9.277-7.512-16.804-16.79-16.81h-0.01l-235.195 0.01c-69.586 0-125.998 56.412-125.998 125.997L329 689.701c0 9.277 7.522 16.8 16.8 16.8h247.796c62.628 0 113.398-50.768 113.398-113.397v-96.599c0-9.277-7.522-16.799-16.8-16.799z" p-id="2603" fill="#515151"></path></svg> 
      </a>
    </li>
    
    <li>
      <a
        href="https://github.com/Amarantos-Arrebol"
        target="_blank"
        
        title="GitHub"
        
        rel="me"
      >
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>


 
      </a>
    </li>
    
  </ol><ol class="menu" id="main-menu">
      
    <li >
      <a
        href="/"
        
      >
           <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>


 
        <span>主页</span>
      </a>
    </li>
     
    <li >
      <a
        href="/archives/"
        
      >
           <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>


 
        <span>归档</span>
      </a>
    </li>
     
    <li >
      <a
        href="/search/"
        
      >
           <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>


 
        <span>搜索</span>
      </a>
    </li>
     
    <li >
      <a
        href="/%E6%8A%80%E6%9C%AF%E9%93%BE%E6%8E%A5/"
        
      >
           <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>


 
        <span>技术链接</span>
      </a>
    </li>
    
    <li class="menu-bottom-section">
      <ol class="menu"> 
        <li id="dark-mode-toggle">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>


 <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



          <span>暗色模式</span>
        </li>
        
      </ol>
    </li>
  </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#1再谈构造函数">1、再谈构造函数</a>
      <ul>
        <li><a href="#11初始化列表">1.1初始化列表</a></li>
        <li><a href="#12-初始化列表总结">1.2 初始化列表总结</a></li>
      </ul>
    </li>
    <li><a href="#2隐式类型转换">2、隐式类型转换</a>
      <ul>
        <li><a href="#21内置类型和自定义类型之间的转换">2.1内置类型和自定义类型之间的转换</a></li>
        <li><a href="#22类型转换的应用场景">2.2类型转换的应用场景</a></li>
        <li><a href="#23自定义类型和自定义类型之间的转换">2.3自定义类型和自定义类型之间的转换</a></li>
      </ul>
    </li>
    <li><a href="#3static成员">3、static成员</a>
      <ul>
        <li><a href="#31静态成员变量">3.1静态成员变量</a></li>
        <li><a href="#32静态成员函数">3.2静态成员函数</a></li>
        <li><a href="#33静态成员的访问和细节">3.3静态成员的访问和细节</a></li>
      </ul>
    </li>
    <li><a href="#4友元">4、友元</a></li>
    <li><a href="#5内部类">5、内部类</a></li>
    <li><a href="#6匿名对象">6、匿名对象</a></li>
    <li><a href="#7对象拷贝时的编译器优化">7、对象拷贝时的编译器优化</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
        
        
        <div id="back-to-top">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                <path d="M512 298.666667l-298.666667 310.912L283.52 682.666667 512 445.312 740.48 682.666667 810.666667 609.578667z"></path>
            </svg>
        </div>
    </aside>



<script>
(function() {
    const backToTopButton = document.getElementById('back-to-top');
    if (!backToTopButton) return;
    
    
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            backToTopButton.classList.add('show');
        } else {
            backToTopButton.classList.remove('show');
        }
    });
    
    
    backToTopButton.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
})();
</script>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/class-with-object-03/">
                <img src="/p/class-with-object-03/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF_hu_7ee0e893365d5776.png"
                        srcset="/p/class-with-object-03/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF_hu_7ee0e893365d5776.png 800w, /p/class-with-object-03/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF_hu_4eadafc0a4893607.png 1600w"
                        width="800" 
                        height="450" 
                        loading="lazy"
                        alt="Featured image of post 【C&#43;&#43;初阶】04类和对象（下）" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/c&#43;&#43;/" style="background-color: #FF8F8F; color: #fff;">
                C&#43;&#43;
            </a>
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="background-color: #B7A3E3; color: #fff;">
                学习笔记
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/class-with-object-03/">【C&#43;&#43;初阶】04类和对象（下）</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            从初始化列表到静态成员：更深入的类机制
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div class="article-time-item">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-11-02</time>
            </div><span class="article-time-divider">|</span>
            <div class="article-time-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-word"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2" /><path d="M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5" /></svg>
                <span class="article-time--wordcount">3008 字
                </span>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="1再谈构造函数">1、再谈构造函数
</h1><h2 id="11初始化列表">1.1初始化列表
</h2><p>在讲构造函数的时候，我们提到过编译器默认自动生成的构造，对于自定义类型的成员变量，会调用</p>
<p>它的默认构造，如果没有默认构造，编译器就会报错，</p>
<p>所以我们必须初始化这个成员变量，需要用初始化列表才能解决</p>
<p>语法上可以理解为初始化列表是每个成员变量定义初始化的地方</p>
<p><strong>1）语法：</strong></p>
<p>初始化列表的使用是以一个冒号开始，接着是一个以逗号分隔的数据成员列表，</p>
<p>每个”成员变量“后面跟一个放在括号中的初始值或表达式（可以malloc）</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911191939901.png"
	width="696"
	height="396"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911191939901_hu_41238042fa547f53.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911191939901_hu_60445f6186d29259.png 1024w"
	loading="lazy"
	
		alt="image-20250911191939901"
	
	
		class="gallery-image" 
		data-flex-grow="175"
		data-flex-basis="421px"
	
></p>
<p><strong>2）注意/细节：</strong></p>
<ul>
<li>
<p>每个成员变量在初始化列表中只能出现一次</p>
<p>（语法上可以理解为初始化列表是每个成员变量定义初始化的地方）</p>
</li>
<li>
<p><span style="color: #8080FF;">引用成员变量</span>，<span style="color: #8080FF;">const成员变量</span>，<span style="color: #8080FF;">没有默认构造的类类型成员变量</span>，（const变量也只能在定义的时候初始化）<strong>必须放在初始化列表位置进行初始化</strong>，否则会编译报错</p>
<p>引用只能在定义的时候初始化，const修饰的是不能被修改的，也只能在初始化的时候修改</p>
<p>没有默认构造，意味着要调用它的构造就只能传参，那么我们就必须初始化<img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192020384.png"
	width="1185"
	height="839"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192020384_hu_a3da7fb28a805487.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192020384_hu_afe90c680f37e534.png 1024w"
	loading="lazy"
	
		alt="image-20250911192020384"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="338px"
	
> <img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192027652.png"
	width="338"
	height="317"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192027652_hu_8dcbac790d0ba04d.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192027652_hu_67dcba1272e0f178.png 1024w"
	loading="lazy"
	
		alt="image-20250911192027652"
	
	
		class="gallery-image" 
		data-flex-grow="106"
		data-flex-basis="255px"
	
></p>
</li>
<li>
<p>C11支持在成员变量声明的位置给缺省值，这个缺省值主要是给</p>
</li>
</ul>
<p>没有显示在初始化列表初始化的成员使用的</p>
<ul>
<li>
<p><strong>尽量使用初始化列表初始化，因为那些你不在初始化列表初始化的成员也会走初始化列表</strong></p>
<p><strong>对于自定义类型的成员变量：</strong></p>
<p>C++并没有规定。对于没有显示在初始化列表初始化的自定义类型成员会调用这个成员类型的默认构造函数，如果没有默认构造会编译错误</p>
<p><strong>对于内置类型的成员：</strong></p>
<p>如果这个成员在初始化列表没有显示地给值，但是在声明位置给了缺省值，那么，初始化列表会用这个缺省值初始化。【缺省就是备用的意思】</p>
<p>如果在声明的时候没有给缺省值，那么初始化列表初始化的内置类型成员是否初始化取决于编译器<img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192139495.png"
	width="760"
	height="197"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192139495_hu_f99f8fe01f7d5017.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192139495_hu_c1034703615cb2ea.png 1024w"
	loading="lazy"
	
		alt="image-20250911192139495"
	
	
		class="gallery-image" 
		data-flex-grow="385"
		data-flex-basis="925px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192202082.png"
	width="534"
	height="216"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192202082_hu_17991a203b1cb8f0.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192202082_hu_74fa48731097830a.png 1024w"
	loading="lazy"
	
		alt="image-20250911192202082"
	
	
		class="gallery-image" 
		data-flex-grow="247"
		data-flex-basis="593px"
	
></p>
</li>
</ul>
<h2 id="12-初始化列表总结">1.2 初始化列表总结
</h2><p><span style="color: #8080FF;">每个成员变量都要走初始化列表</span></p>
<p>如果在初始化列表中，已经显示地初始化了，那么就用显示初始化的值</p>
<p>如果在初始化列表中没有显示初始化，那么就用缺省值</p>
<p>如果没有缺省值，那么内置类型初始化为随机值，自定义类型就调默认构造（如果没有，就编译报错）</p>
<p>构造函数初始化成员，尽量使用初始化列表</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192217136.png"
	width="1261"
	height="561"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192217136_hu_96a34e9c6df6c72b.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192217136_hu_40b5d19a34b7f160.png 1024w"
	loading="lazy"
	
		alt="image-20250911192217136"
	
	
		class="gallery-image" 
		data-flex-grow="224"
		data-flex-basis="539px"
	
></p>
<ul>
<li>初始化列表中按照成员变量在<strong>类中声明的顺序</strong>进行初始化，不是按照成员在初始化列表出现的先后顺序来初始化的。【建<span style="color: #8080FF;">议声明顺序和初始化列表顺序保持一致</span>】<img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192232576.png"
	width="698"
	height="929"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192232576_hu_86b893cc1a513819.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192232576_hu_7a7d262c5dabd00.png 1024w"
	loading="lazy"
	
		alt="image-20250911192232576"
	
	
		class="gallery-image" 
		data-flex-grow="75"
		data-flex-basis="180px"
	
></li>
</ul>
<h1 id="2隐式类型转换">2、隐式类型转换
</h1><p>两个类型之间有一定的关联才能互相转换。算术类型之间能互相转，因为它们都表数据大小</p>
<p>指针和整型之间，指针本质是一个地址的编号，也是表数据的大小</p>
<p>一个类型，如果支持单参数的构造函数，那这个参数的类型支持隐式类型转换</p>
<p>单参数的构造函数支持隐式类型转换</p>
<h2 id="21内置类型和自定义类型之间的转换">2.1内置类型和自定义类型之间的转换
</h2><ul>
<li>
<p>C++支持内置类型隐式转换为类类型对象，需要有相关内置类型为参数的构造函数</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192314313.png"
	width="652"
	height="1020"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192314313_hu_da5d3d8971b4aecd.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192314313_hu_782fe38a41bbb9e0.png 1024w"
	loading="lazy"
	
		alt="image-20250911192314313"
	
	
		class="gallery-image" 
		data-flex-grow="63"
		data-flex-basis="153px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192321049.png"
	width="751"
	height="280"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192321049_hu_7ce0943e96c22da7.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192321049_hu_f97b4d3ea3f2cd9d.png 1024w"
	loading="lazy"
	
		alt="image-20250911192321049"
	
	
		class="gallery-image" 
		data-flex-grow="268"
		data-flex-basis="643px"
	
></p>
<p><strong>注意：</strong></p>
<p>1）类型转换之间会产生临时对象，临时对象具有常性（要加const）</p>
<p>类型不同的两个变量之间的赋值，是把类型转换之间产生的临时对象拷贝给目标变量</p>
<p>​</p>
<p>2）编译器遇到连续构造+拷贝构造-&gt;优化为直接构造</p>
<p>3）不能通过使用( , )的方式调用多参数的构造</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192339056.png"
	width="328"
	height="170"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192339056_hu_4e39e0d0c62431f8.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192339056_hu_d92912e67f0201d1.png 1024w"
	loading="lazy"
	
		alt="image-20250911192339056"
	
	
		class="gallery-image" 
		data-flex-grow="192"
		data-flex-basis="463px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192347809.png"
	width="560"
	height="65"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192347809_hu_1fd5635bde6cb140.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192347809_hu_323893b28a5bf2d.png 1024w"
	loading="lazy"
	
		alt="image-20250911192347809"
	
	
		class="gallery-image" 
		data-flex-grow="861"
		data-flex-basis="2067px"
	
></p>
<p>实际调用的还是单参数的构造</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192404638.png"
	width="283"
	height="116"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192404638_hu_780539a17eec65f9.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192404638_hu_770a8a8495fce694.png 1024w"
	loading="lazy"
	
		alt="image-20250911192404638"
	
	
		class="gallery-image" 
		data-flex-grow="243"
		data-flex-basis="585px"
	
></p>
</li>
</ul>
<ul>
<li>
<p>如果我们希望调用<span style="color: #FF0000;">多参数</span>的构造，C++11支持的写法是使用<span style="color: #FF0000;">{ }</span></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192429959.png"
	width="801"
	height="87"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192429959_hu_391df2ac9e0bcce5.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192429959_hu_f70eb84ce806f7cf.png 1024w"
	loading="lazy"
	
		alt="image-20250911192429959"
	
	
		class="gallery-image" 
		data-flex-grow="920"
		data-flex-basis="2209px"
	
></p>
</li>
<li>
<p>在构造函数前面加 explicit 就不再支持隐式类型转换</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192449736.png"
	width="629"
	height="471"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192449736_hu_bda5116d2dd7fbc5.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192449736_hu_c2fd2201658d8a90.png 1024w"
	loading="lazy"
	
		alt="image-20250911192449736"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="320px"
	
></p>
</li>
</ul>
<h2 id="22类型转换的应用场景">2.2类型转换的应用场景
</h2><p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192509814.png"
	width="766"
	height="428"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192509814_hu_95d1f883e9b2aeb0.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192509814_hu_2ec11b4c34806a51.png 1024w"
	loading="lazy"
	
		alt="image-20250911192509814"
	
	
		class="gallery-image" 
		data-flex-grow="178"
		data-flex-basis="429px"
	
></p>
<h2 id="23自定义类型和自定义类型之间的转换">2.3自定义类型和自定义类型之间的转换
</h2><p>类类型的对象之间也可以隐式转换，需要相应的构造函数支持</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192532664.png"
	width="276"
	height="384"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192532664_hu_9b00f8ae01143a2c.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192532664_hu_3150b1ddd6c89d7d.png 1024w"
	loading="lazy"
	
		alt="image-20250911192532664"
	
	
		class="gallery-image" 
		data-flex-grow="71"
		data-flex-basis="172px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192541272.png"
	width="654"
	height="98"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192541272_hu_840d74d2d5e60eb3.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192541272_hu_11f919eab04e6c22.png 1024w"
	loading="lazy"
	
		alt="image-20250911192541272"
	
	
		class="gallery-image" 
		data-flex-grow="667"
		data-flex-basis="1601px"
	
></p>
<p>aa3会构造生成一个临时对象，临时对象再拷贝构造给b，实际上编译器做了优化</p>
<p>直接构造</p>
<h1 id="3static成员">3、static成员
</h1><h2 id="31静态成员变量">3.1静态成员变量
</h2><p>变量静态成员变量就是被static修饰的成员变量</p>
<p>静态成员变量遵循 类里声明，类外初始化</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192637385.png"
	width="432"
	height="324"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192637385_hu_15349efc78b6b8f6.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192637385_hu_2242bdb2fad212bb.png 1024w"
	loading="lazy"
	
		alt="image-20250911192637385"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="320px"
	
></p>
<ul>
<li>静态成员变量为类的所有对象所共享，不属于某个具体的对象，不存放在对象中，存放在静态区</li>
</ul>
<h2 id="32静态成员函数">3.2静态成员函数
</h2><p>普通成员函数有this指针，必须用对象调用</p>
<p>静态成员函数被static修饰，静态成员函数没有this指针，可以不用对象调用（对象调用也可以）</p>
<p>它指定类域就可以调用（如果是公有的情况下）</p>
<ul>
<li>
<p>静态成员函数中可以访问其它静态成员，但是不能访问非静态的，因为没有this指针</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192726513.png"
	width="399"
	height="417"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192726513_hu_c50dc85173bbf2b9.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192726513_hu_9ec9dfff98eb683f.png 1024w"
	loading="lazy"
	
		alt="image-20250911192726513"
	
	
		class="gallery-image" 
		data-flex-grow="95"
		data-flex-basis="229px"
	
></p>
</li>
<li>
<p>非静态的成员函数，可以访问任意的静态成员变量和静态成员函数</p>
</li>
<li>
<p>不用成员函数的类，就可以考虑做成静态成员函数，这样对象可以调，通过类域也可以调</p>
</li>
</ul>
<h2 id="33静态成员的访问和细节">3.3静态成员的访问和细节
</h2><ul>
<li>
<p>可以通过类名::静态成员 或者对象.静态成员 来访问静态成员变量和静态成员函数</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192805039.png"
	width="551"
	height="295"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192805039_hu_71f632bd44438c12.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192805039_hu_cd2a77d517527660.png 1024w"
	loading="lazy"
	
		alt="image-20250911192805039"
	
	
		class="gallery-image" 
		data-flex-grow="186"
		data-flex-basis="448px"
	
></p>
</li>
</ul>
<ul>
<li>
<p>静态成员也是类的成员，受pubic、protected、private 访问限定符的限制</p>
<p>访问限定符限制的是类外面去直接访问，在类里面不受限制</p>
<p>如果想在类外面访问静态成员，可以在类里面提供Get函数，返回静态成员的值</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192913583.png"
	width="299"
	height="174"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192913583_hu_341060a3577a74f5.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911192913583_hu_a835ca9af629a34b.png 1024w"
	loading="lazy"
	
		alt="image-20250911192913583"
	
	
		class="gallery-image" 
		data-flex-grow="171"
		data-flex-basis="412px"
	
></p>
</li>
</ul>
<ul>
<li>静态成员变量不能在声明位置给缺省值初始化，因为缺省值是给构造函数初始化列表的，静态成员变量不属于某个对象，不走构造函数初始化列表</li>
</ul>
<h1 id="4友元">4、友元
</h1><p>友元提供了⼀种突破类访问限定符封装的方式</p>
<p>（想在类外面访问类私有的的成员）</p>
<p>友元分为：友元函数和友元类，在函数声明或者类声明的前面加friend，</p>
<p>并且把友元声明放到⼀个类的里面。</p>
<p>• 外部友元函数可访问类的私有和保护成员，友元函数仅仅是⼀种声明，他不是类的成员函数。</p>
<p>• 友元函数可以在类定义的任何地方声明，不受类访问限定符限制。</p>
<p>• ⼀个函数可以是多个类的友元函数。</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193013253.png"
	width="801"
	height="1028"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193013253_hu_dc41b1aeb0426ce.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193013253_hu_e68e3e112f489dbd.png 1024w"
	loading="lazy"
	
		alt="image-20250911193013253"
	
	
		class="gallery-image" 
		data-flex-grow="77"
		data-flex-basis="187px"
	
></p>
<p><strong>友元类</strong></p>
<ul>
<li>友元类中的成员函数都可以是另⼀个类的友元函数，都可以访问另⼀个类中的私有和保护成员。</li>
</ul>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250914204803985.png"
	width="787"
	height="1171"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250914204803985_hu_2101a40a949100ab.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250914204803985_hu_acd404ee03f4e5b7.png 1024w"
	loading="lazy"
	
		alt="image-20250914204803985"
	
	
		class="gallery-image" 
		data-flex-grow="67"
		data-flex-basis="161px"
	
></p>
<ul>
<li>
<p>友元类的关系是单向的，不具有交换性，比如A类是B类的友元，但是B类不是A类的友元。</p>
</li>
<li>
<p>友元类关系不能传递，如果A是B的友元， B是C的友元，但是A不是C的友元。</p>
</li>
<li>
<p>有时提供了便利。但是友元会增加耦合度，破坏了封装，所以友元不宜多用。</p>
<p>耦合度指两个函数的关系，关系越紧密，耦合度就越高</p>
<p>一般要求：低耦合，高内聚</p>
</li>
</ul>
<h1 id="5内部类">5、内部类
</h1><p>如果⼀个类定义在另⼀个类的内部，这个定义在另一个类内部的类就叫做内部类。</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193144087.png"
	width="584"
	height="696"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193144087_hu_dc9e8f4eb761f477.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193144087_hu_31a006a2754627c1.png 1024w"
	loading="lazy"
	
		alt="image-20250911193144087"
	
	
		class="gallery-image" 
		data-flex-grow="83"
		data-flex-basis="201px"
	
></p>
<ul>
<li>
<p>内部类是一个独立的类，不会变为外面类的一部分，sizeof（外部类）不会计算内部类</p>
</li>
<li>
<p>内部类会受到外面的类的类域的限制。也就是访问时要带上外面的类域</p>
<p>还会受到外面类的访问限定符的限制，如果外部类给内部类的访问限定符为private，则在类外访问内部类会报错</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193244128.png"
	width="175"
	height="52"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193244128_hu_ad394fc1ab78442a.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193244128_hu_ad030d04e5aac677.png 1024w"
	loading="lazy"
	
		alt="image-20250911193244128"
	
	
		class="gallery-image" 
		data-flex-grow="336"
		data-flex-basis="807px"
	
></p>
</li>
<li>
<p>内部类本质是一种封装，当A类跟B类紧密关联，A类实现出来主要就是给B类使用，那么可以考虑把A类设计为B的内部类，如果放到private/protected位置，那么A类就是B类的专属类，其它地方都用不了</p>
</li>
<li>
<p>内部类默认是外部类的友元</p>
</li>
</ul>
<h1 id="6匿名对象">6、匿名对象
</h1><ul>
<li>
<p>用类型(实参)定义出来的对象叫匿名对象</p>
<p>匿名对象调用无参构造时要带上括号，有名对象不用带</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193323548.png"
	width="425"
	height="281"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193323548_hu_8b8ce4427ba39a8c.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193323548_hu_d9c92cdde755ff82.png 1024w"
	loading="lazy"
	
		alt="image-20250911193323548"
	
	
		class="gallery-image" 
		data-flex-grow="151"
		data-flex-basis="362px"
	
></p>
</li>
</ul>
<ul>
<li>
<p>匿名对象的生命周期只在当前行</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193340002.png"
	width="371"
	height="279"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193340002_hu_cb02eac0054de58b.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193340002_hu_18bfdd2e35895464.png 1024w"
	loading="lazy"
	
		alt="image-20250911193340002"
	
	
		class="gallery-image" 
		data-flex-grow="132"
		data-flex-basis="319px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193346843.png"
	width="674"
	height="264"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193346843_hu_18a89f2d1b90da51.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193346843_hu_d35876fdcfa56ec7.png 1024w"
	loading="lazy"
	
		alt="image-20250911193346843"
	
	
		class="gallery-image" 
		data-flex-grow="255"
		data-flex-basis="612px"
	
></p>
</li>
<li>
<p>匿名对象还可以给函数的自定义类型参数做缺省值</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193408624.png"
	width="500"
	height="639"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193408624_hu_db27d17efa954cc6.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193408624_hu_d333042c8d327ce6.png 1024w"
	loading="lazy"
	
		alt="image-20250911193408624"
	
	
		class="gallery-image" 
		data-flex-grow="78"
		data-flex-basis="187px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193416766.png"
	width="361"
	height="105"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193416766_hu_a653e241456d86df.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193416766_hu_641741c73c760bca.png 1024w"
	loading="lazy"
	
		alt="image-20250911193416766"
	
	
		class="gallery-image" 
		data-flex-grow="343"
		data-flex-basis="825px"
	
></p>
</li>
<li>
<p>匿名对象可以被引用，但是匿名对象和临时对象一样，具有常性，需要加const</p>
<p>const会延长匿名对象的生命周期</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193454041.png"
	width="297"
	height="67"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193454041_hu_6924d1a51c032548.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193454041_hu_3629e25b97d85920.png 1024w"
	loading="lazy"
	
		alt="image-20250911193454041"
	
	
		class="gallery-image" 
		data-flex-grow="443"
		data-flex-basis="1063px"
	
></p>
</li>
</ul>
<h1 id="7对象拷贝时的编译器优化">7、对象拷贝时的编译器优化
</h1><p>现代编译器会为了尽可能提高程序的效率，在不影响正确性的情况下会尽可能减少</p>
<p>⼀些传参和传返</p>
<ul>
<li>
<p>赋值时隐式类型转换的优化</p>
<p>从语法上1先构造一个临时对象，临时对象再拷贝构造给aa0</p>
<p>编译器优化为直接构造</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193528704.png"
	width="369"
	height="124"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193528704_hu_1682567c75cd3a40.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193528704_hu_b159956aaa9cec93.png 1024w"
	loading="lazy"
	
		alt="image-20250911193528704"
	
	
		class="gallery-image" 
		data-flex-grow="297"
		data-flex-basis="714px"
	
></p>
</li>
<li>
<p>传值传参</p>
<p>不会优化，先aa1构造一个对象，然后aa1拷贝构造一个临时对象作为函数f1的参数</p>
<p>该临时对象在函数中，属于局部变量，出函数对象就销毁</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193555678.png"
	width="418"
	height="162"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193555678_hu_b25f688685a7e8c0.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193555678_hu_2d9f036c6dcff42e.png 1024w"
	loading="lazy"
	
		alt="image-20250911193555678"
	
	
		class="gallery-image" 
		data-flex-grow="258"
		data-flex-basis="619px"
	
></p>
</li>
<li>
<p>传参时，隐式类型，连续构造+拷贝构造-&gt;直接优化为构造</p>
<p>先用1构造一个A的临时对象，然后用它再去拷贝构造aa</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193624016.png"
	width="308"
	height="104"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193624016_hu_5521c3eb6842846e.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193624016_hu_ff365ebafa7f4f5d.png 1024w"
	loading="lazy"
	
		alt="image-20250911193624016"
	
	
		class="gallery-image" 
		data-flex-grow="296"
		data-flex-basis="710px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193630050.png"
	width="390"
	height="46"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193630050_hu_58d098e9a5865236.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193630050_hu_99fc04999b793e43.png 1024w"
	loading="lazy"
	
		alt="image-20250911193630050"
	
	
		class="gallery-image" 
		data-flex-grow="847"
		data-flex-basis="2034px"
	
></p>
</li>
</ul>
<ul>
<li>
<p>一个表达式中，连续构造+拷贝构造-&gt;优化为一个构造</p>
<p>本应该A(2)构造一个匿名对象，再用匿名对象拷贝构造给f1的参数</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193705120.png"
	width="329"
	height="65"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193705120_hu_1d74e43b615acf24.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193705120_hu_475aae65fb61b00e.png 1024w"
	loading="lazy"
	
		alt="image-20250911193705120"
	
	
		class="gallery-image" 
		data-flex-grow="506"
		data-flex-basis="1214px"
	
></p>
</li>
<li>
<p>传值返回也会优化</p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193721726.png"
	width="433"
	height="454"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193721726_hu_85a1d1022581b403.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193721726_hu_9eca0b80804b1140.png 1024w"
	loading="lazy"
	
		alt="image-20250911193721726"
	
	
		class="gallery-image" 
		data-flex-grow="95"
		data-flex-basis="228px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193727357.png"
	width="246"
	height="114"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193727357_hu_9bf8ba73f221f5cf.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193727357_hu_f42d267d05021328.png 1024w"
	loading="lazy"
	
		alt="image-20250911193727357"
	
	
		class="gallery-image" 
		data-flex-grow="215"
		data-flex-basis="517px"
	
></p>
<p><strong>语法上：</strong></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193756057.png"
	width="891"
	height="619"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193756057_hu_5b854f6be5e8507b.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193756057_hu_2ad69f54a629da3.png 1024w"
	loading="lazy"
	
		alt="image-20250911193756057"
	
	
		class="gallery-image" 
		data-flex-grow="143"
		data-flex-basis="345px"
	
></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193808203.png"
	width="1380"
	height="571"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193808203_hu_fb21c538758d0758.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193808203_hu_f209c0619e961ff.png 1024w"
	loading="lazy"
	
		alt="image-20250911193808203"
	
	
		class="gallery-image" 
		data-flex-grow="241"
		data-flex-basis="580px"
	
></p>
<p><strong>优化为：</strong></p>
<p><img src="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193821915.png"
	width="916"
	height="616"
	srcset="/p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193821915_hu_d9fb4577a82bf33a.png 480w, /p/class-with-object-03/%E3%80%90C&#43;&#43;%E5%88%9D%E9%98%B6%E3%80%91%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.assets/image-20250911193821915_hu_57a421cb614e48e9.png 1024w"
	loading="lazy"
	
		alt="image-20250911193821915"
	
	
		class="gallery-image" 
		data-flex-grow="148"
		data-flex-basis="356px"
	
></p>
</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/c&#43;&#43;%E5%88%9D%E9%98%B6/">C&#43;&#43;初阶</a>
        
            <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a>
        
            <a href="/tags/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/">运算符重载</a>
        
            <a href="/tags/const%E6%88%90%E5%91%98/">Const成员</a>
        
    </section>


    
</footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/class-with-object-01/">
        
        
            <div class="article-image">
                <img src="/p/class-with-object-01/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF.d3876019e9ad712ed55030ebd42e3df3_hu_94f24ba070ea6f3e.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 【C&#43;&#43;初阶】02类和对象（上）"
                        data-key="class-with-object-01" 
                        data-hash="md5-04dgGemtcS7VUDDr1C498w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">【C&#43;&#43;初阶】02类和对象（上）</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/class-with-object-02/">
        
        
            <div class="article-image">
                <img src="/p/class-with-object-02/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91AI-AI%E9%A3%8E%E6%99%AF.d3876019e9ad712ed55030ebd42e3df3_hu_94f24ba070ea6f3e.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 【C&#43;&#43;初阶】03类和对象（中）"
                        data-key="class-with-object-02" 
                        data-hash="md5-04dgGemtcS7VUDDr1C498w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">【C&#43;&#43;初阶】03类和对象（中）</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/start-c-/">
        
        
            <div class="article-image">
                <img src="/p/start-c-/mountains-1412683_1920.8378a36e3da3b9927eb7b8236dbbd8d6_hu_38cad4bcb7d0b81e.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 【C&#43;&#43;初阶】01入门知识"
                        data-key="start-c&#43;&#43;" 
                        data-hash="md5-g3ijbj2juZJ&#43;t7gjbbvY1g==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">【C&#43;&#43;初阶】01入门知识</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/c-memory-management/">
        
        
            <div class="article-image">
                <img src="/p/c-memory-management/05.e21599781b5af128cb4088245af86b9d_hu_39c641d01d069a51.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 【C&#43;&#43;初阶】05内存管理"
                        data-key="c&#43;&#43;-memory-management" 
                        data-hash="md5-4hWZeBta8SjLQIgkWvhrnQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">【C&#43;&#43;初阶】05内存管理</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/template-basics-and-stl-introduction/">
        
        
            <div class="article-image">
                <img src="/p/template-basics-and-stl-introduction/09.2fe82299e0dd40ef039c8e19bbf498cd_hu_ffd55995b1c88359.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 【C&#43;&#43;初阶】06模版初阶&#43;STL简介"
                        data-key="template-basics-and-stl-introduction" 
                        data-hash="md5-L&#43;gimeDdQO8DnI4Zu/SYzQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">【C&#43;&#43;初阶】06模版初阶&#43;STL简介</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 PursUnre
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.31.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>


    </body>
</html>
